{{ $js := resources.Get "ts/main.ts" | js.Build }}
<script src="{{ $js.Permalink }}" defer></script>

<div id="map"></div>

<script src="https://unpkg.com/maplibre-gl/dist/maplibre-gl.js"></script>
<link href="https://unpkg.com/maplibre-gl/dist/maplibre-gl.css"
      rel="stylesheet"/>
<script>
    const styles = {
        openfreemapBw: 'https://tiles.openfreemap.org/styles/positron',
        openfreemapLiberty: 'https://tiles.openfreemap.org/styles/liberty',
        openfreemapBright: 'https://tiles.openfreemap.org/styles/bright',
        versatilesColorful: 'https://tiles.versatiles.org/assets/styles/colorful.json',
    };
    let currentStyle = 'openfreemapBw';

    const map = new maplibregl.Map({
        container: 'map',
        style: 'https://tiles.openfreemap.org/styles/positron',
        center: [8.26, 53.71],
        zoom: 9,
        maxPitch: 85
    });
    map.addControl(new maplibregl.NavigationControl({
        visualizePitch: true
    }));
    map.addControl(new maplibregl.FullscreenControl());
    map.addControl(new maplibregl.ScaleControl({
        unit: 'metric'
    }));
    map.addControl(new maplibregl.GeolocateControl({
        positionOptions: {
            enableHighAccuracy: true
        },
        trackUserLocation: true,
        showAccuracyCircle: true
    }));
    // change map style
    /*document.getElementById('styleToggle').addEventListener('click', () => {
        currentStyle = currentStyle === 'openfreemapBw' ? 'versatilesColorful' : 'openfreemapBw';
        map.setStyle(styles[currentStyle]);
    });*/


    map.on('load', () => {
        // add OpenSeaMap overlay
        map.addSource('raster-source', {
            type: 'raster',
            tiles: [
                'https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png'
            ],
            tileSize: 256,
        });
        map.addLayer({
            id: 'openseamap',
            type: 'raster',
            source: 'raster-source',
        });
    });
</script>
<style>
  #map {
    width: 100%;
    height: 93vh;
  }
</style>